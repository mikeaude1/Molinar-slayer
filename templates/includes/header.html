{% load i18n %}
{% load static %}
<header class="header">
  <div class="header-container">
    <div class="header-left">
      <span class="header-logo">{% trans "JMA" %}</span>
    </div>
    <div class="header-title">{% trans "Jesus Molinar Alcaraz" %}</div>
    <div class="header-right" style="position:relative;">
      <button class="menu-icon" aria-label="Open menu">&#9776;</button>
      <div id="dropdown-menu" class="dropdown-menu" style="display:none; position:absolute; right:0; top:100%; background:#e5e7eb; box-shadow:0 2px 8px rgba(0,0,0,0.12); border-radius:0.5rem; min-width:180px; z-index:999;">
        <ul style="list-style:none; margin:0; padding:0;">
          <li><a href="#" style="display:block; padding:0.75rem 1.25rem; color:rgb(51,51,51); text-decoration:none;">{% trans "Iniciar sesión" %}</a></li>
          <li><a href="{% url 'index' %}" id="lang-switch" style="display:block; padding:0.75rem 1.25rem; color:rgb(51,51,51); text-decoration:none;">{% trans "home" %}</a></li>
          <li><a href="{% url 'aboutus' %}" style="display:block; padding:0.75rem 1.25rem; color:rgb(51,51,51); text-decoration:none;">{% trans "Acerca de nosotros" %}</a></li>
          <li><a href="{% url 'practiceareas:practiceareas' %}" style="display:block; padding:0.75rem 1.25rem; color:rgb(51,51,51); text-decoration:none;">{% trans "Áreas de Práctica" %}</a></li>
        </ul>
      </div>
      <script>
        const menuBtn = document.querySelector('.menu-icon');
        const dropdownMenu = document.getElementById('dropdown-menu');
        menuBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        });
        document.addEventListener('click', function(e) {
          if (!e.target.closest('.header-right')) {
            dropdownMenu.style.display = 'none';
          }
        });
      </script>
    </div>
    <form action="/i18n/setlang/" method="post" class="lang-selector-form" style="margin-left:2rem;">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ request.path }}">
        <select name="language" onchange="this.form.submit()" class="lang-selector" style="padding:0.5rem 1.5rem; border-radius:0.5rem; background:#e5e7eb; color:#333; font-size:1rem; border:1px solid #ccc; box-shadow:0 1px 4px rgba(0,0,0,0.08); cursor:pointer;">
            <option value="es" {% if request.LANGUAGE_CODE == 'es' %}selected{% endif %}>{% trans "Español" %}</option>
            <option value="en" {% if request.LANGUAGE_CODE == 'en' %}selected{% endif %}>{% trans "English" %}</option>
        </select>
    </form>
  </div>
</header>